[‚Üê –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](/README.md)  

# –ë–∏–±–ª–∏–æ—Ç–∫–∞ Cropper.js
üìò [–°–∞–π—Ç Cropper.js](https://fengyuanchen.github.io/cropperjs/)   
üìò [Github Cropper.js](https://github.com/fengyuanchen/cropperjs)  
‚ôª [CDN ](https://cdnjs.com/libraries/cropperjs)  
üìò [Github jquery-cropper](https://github.com/fengyuanchen/jquery-cropper)   

–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ Visual Studio 2019 –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LibMan —Å ASP.NET Core –≤ Visual Studio](https://docs.microsoft.com/ru-ru/aspnet/core/client-side/libman/libman-vs?view=aspnetcore-3.1). –î–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ LibMan (–î–æ–±–∞–≤–∏—Ç—å/–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞) –í –ø–æ–ª–µ –≤–≤–æ–¥–∞ "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞" –≤–≤–µ–¥—Ç–∏—Ç–µ `cropperjs` –∏ –Ω–∞–∂–º–∏—Ç–µ –≤–≤–æ–¥ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π.

## –ü—Ä–æ—Å—Ç–µ–π—à–µ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
–í –∑–∞–≥–æ–ª–æ–≤–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ —Å—Ç–∏–ª—å, —ç—Ç–æ –Ω–∞–¥–æ –¥–ª—è –ø—Ä–æ—Ä–∏—Å–æ–≤–∫–∏ –º–∞—Ä–∫–µ—Ä–æ–≤, –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è —Ñ–æ–Ω–∞ –∏ —Ç.–¥.:
```
@section PageCss{
    <link href="~/lib/cropper/cropperjs/cropper.css" rel="stylesheet">
}
```
–ü—Ä–∏ —ç—Ç–æ–º –≤ —Ä–∞–∑–º–µ—Ç–∫–µ *Shared/_Layout.cshtml* –µ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏–π –≤—ã–∑–æ–≤ –¥–∞–Ω–Ω–æ–π —Å–µ–∫—Ü–∏–∏:
```
<head>
    <meta charset="utf-8" />
    ...
    @RenderSection("PageCss", required: false)
</head>
```
* **–ë–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**  
–†–∞–∑–º–µ—Ç–∫–∞ html –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã—Ä–µ–∑–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–≥–∞ `form` -- –≤—Å—ë –¥–µ–ª–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:
```
<div class="m-3">
    <!-- –≤—ã–±–∏—Ä–∞–µ–º –∏—Å—Ö–æ–¥–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É -->
    <input id="img_select" type="file" class="form-control-file" accept="image/*" />
    <button id="btn_crop">–û–±—Ä–µ–∑–∞—Ç—å</button>

    <!-- –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏—Å—Ö–æ–¥–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ –æ–±—Ä–µ–∑–∫–∏ -->
    <div id="img_bg" class="m-3"></div>

    <!-- –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ–±—Ä–µ–∑–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É -->
    <div class="m-3">
        <img id="img_cropped"  src="" alt="">
    </div>

    <!-- —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä -->
    @* –∑–¥–µ—Å—å –¥–æ–±–∞–≤–∏–º —Ñ–æ—Ä–º—É –ø–æ–∑–∂–µ *@
</div>
```
–°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–Ω–∞—á–∞–ª–∞ –≤–∫–ª—é—á–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫—É cropper.js, –∑–∞—Ç–µ–º –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```
@section scripts{
    <script src="~/lib/cropper/cropperjs/cropper.js"></script>

    <script>
        //<![CDATA[

        let
            upload = document.querySelector('#img_select'), //–ø–æ–ª–µ –≤—ã–±–æ—Ä–∞ –∏—Å—Ö–æ–¥–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏
            result = document.querySelector('#img_bg'), //–∫–æ–Ω—Ç–µ–π–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏
            save = document.querySelector('#btn_crop'), //–∫–Ω–æ–ø–∫–∞ –æ–±—Ä–µ–∑–∫–∏
            cropped = document.querySelector('#img_cropped'),//–æ–±—Ä–µ–∑–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞
            //data = –∑–¥–µ—Å—å –¥–æ–±–∞–≤–∏–º –ø–æ–ª–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ä–≤–µ—Ä
            cropper = '';

        //–æ—Ç–æ–±—Ä–æ–∑–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ –ø–æ—Å–ª–µ –µ—ë –≤—ã–±–æ—Ä–∞
        upload.addEventListener('change', (e) => {
            if (e.target.files.length) {
                //—á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏
                const reader = new FileReader();
                reader.onload = (e) => {
                    if (e.target.result) {
                        //—Å–æ–∑–¥–∞—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É 
                        let img = document.createElement('img');
                        img.id = 'image';
                        img.src = e.target.result
                        //–æ—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –µ—Å–ª–∏ —Ä–∞–Ω–µ–µ —É–∂–µ –≤—ã–±–∏—Ä–∞–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É
                        result.innerHTML = '';
                        //–æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É
                        result.appendChild(img);
                        
                        //–ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏ cropper -- –ø–æ—è–≤—è—Ç—Å—è –º–µ—Ç–∫–∏ –æ–±—Ä–µ–∑–∫–∏
                        cropper = new Cropper(img);
                    }
                };
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        //–æ–±—Ä–µ–∑–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É
        save.addEventListener('click', (e) => {
            e.preventDefault();
            //—Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–µ–∑–∫–∏
            let imgSrc = cropper.getCroppedCanvas({}).toDataURL();
            cropped.src = imgSrc;
            //data -- –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        });

     //]]>
    </script>
}
```
–°–∫—Ä–∏–ø—Ç –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—Ä—Ç–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –µ—ë –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–æ–Ω–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ—ë —Ä–∞–º–∫—É –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ö–æ–¥–≥–∞ –Ω–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É *–û–±—Ä–µ–∑–∞—Ç—å*, cropper –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–µ–∑–∫–∏.  
–¢–µ–ø–µ—Ä—å –Ω–∞–¥–æ –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—Ä–µ–∑–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

* **–û—Ç–ø—Ä–∞–≤–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:** 
–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±: –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ä–∞–∑–º–µ—Ç–∫—É —Ñ–æ—Ä–º—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ. –ê –≤ —ç—Ç–æ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –∑–∞–ø–∏—à–µ–º –¥–∞–Ω–Ω—ã–µ –∫–æ—Ç–æ—Ä—ã–µ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –∫–∞—Ä—Ç–∏–Ω–∫—É.  

–î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É:
```
<!-- —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä -->
    <form method="post" enctype="multipart/form-data" class="border-bottom pb-3">
        <input type="hidden" name="imgCropped" id="imgCropped" />
        <input id="btn_upload" type="submit" value="–ó–∞–≥—Ä—É–∑–∏—Ç—å" />
    </form>
```
–¢—É—Ç —Ç–æ–ª—å–∫–æ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∏ –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.  

–î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä—É —Å—Ç—Ä–æ–∫ –≤ —Å–∫—Ä–∏–ø—Ç:  
–í–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏ `//data = –∑–¥–µ—Å—å –¥–æ–±–∞–≤–∏–º –ø–æ–ª–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ä–≤–µ—Ä` –¥–æ–±–∞–≤–ª—è–µ–º:  
`data = document.querySelector('#imgCropped'),//–¥–≤–æ–∏—á–Ω–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –æ–±—Ä–µ–∑–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏`  
–ê –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏ `//data -- –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä` –¥–æ–±–∞–≤–ª—è–µ–º:  
```
data.value = imgSrc; //–ø–æ–º–µ—â–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Ñ–æ—Ä–º—ã 
```
–¢–µ–ø–µ—Ä—å, –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ *–û–±—Ä–µ–∑–∞—Ç—å*, –∫—Ä–æ–º–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–±—Ä–µ–∑–∫–∏, –º—ã —Ç–∞–∫–∂–µ –∑–∞–ø–æ–ª–Ω—è–µ–º —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Ñ–æ—Ä–º—ã –¥–≤–æ–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–∫–∏. –≠—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø—Ä—è–º –≤ –±—Ä–æ—É–∑–µ—Ä–µ –•—Ä–æ–º, –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞(F12), –ø–æ–ª–µ 
